language: node_js
sudo: false
node_js:
- '5.0'
- 'stable'
branches:
  except:
  - /^v[0-9\.]+/
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
cache:
  directories:
    - node_modules
env:
  matrix:
  - EMBER_TRY_SCENARIO=ember-1-12
  - EMBER_TRY_SCENARIO=ember-1-13
  - EMBER_TRY_SCENARIO=ember-2-0
  - EMBER_TRY_SCENARIO=ember-2-1
  - EMBER_TRY_SCENARIO=ember-2-2
  - EMBER_TRY_SCENARIO=ember-2-3
  - EMBER_TRY_SCENARIO=ember-2-4
  - EMBER_TRY_SCENARIO=ember-2-5
  - EMBER_TRY_SCENARIO=ember-2-6
  - EMBER_TRY_SCENARIO=ember-2-7
  - EMBER_TRY_SCENARIO=ember-2-8
  - EMBER_TRY_SCENARIO=ember-2-9
  - EMBER_TRY_SCENARIO=ember-2-10
  - EMBER_TRY_SCENARIO=default
  - EMBER_TRY_SCENARIO=ember-release
  - EMBER_TRY_SCENARIO=ember-beta
  - EMBER_TRY_SCENARIO=ember-canary
  global:
    - CXX=g++-4.8
    - secure: fkWF7xBZCCVrFl8fcrE2P8ZXg/Tz55JITa/zXepgXTk/+HFC1nFMTKNt34MrKy0c+S4hbYayXmE01yu0WVgcAQJZfXyzfMJLjSrEtELXbFq6fCCSA1tEKLkY/2baoWqYHXhStVk+ZFmws77dlC4tTY0Gik2RYDlzYncE8rpb2o6c1V/Jxz7nx2Q+IpOF8PH/IcQuCRQo576AfzsU6/hBWa7FoFXf4ELxod1UzfUjo1dD+9NmmOFqMgYm8pwh0whv75x0xbjrBToyvzvw9Ce0JkdYN9Vymoa7tGg6sX0YQSqm/YJdnsM2TIv9CbScSP2etWLQeg6r+IKho5zYDRwh3uQuXe4HFRJVQcYbH+w42wjvfG+dH3NQizNasewIlzaq0PGxifIY3jOJ8Xx0lTECNAgcQk/ZPJo/Ma6o91oPLSkHo9fhXxX0590ypfsZIvaUw6AnzA3nDeRfHImD3UzOKlgvBqJfnQl0Y7luMO36BKKjmNPqIEyWnRom2WWznI0SFDbsn7+elh+xHqYukGj/lBErCVtl6DcG6TtrWzrcxzR5XQGl66tg7C1IrLwq8yPV98NKQDVV5T2eb9XGyzMKRAsVehxJh9zTR66KH+1Q/v4+m3RRTgr3/qJl0FeD2vduUjqYdodfUYQYsBMhuZuvbPET0EUaSssMVA2+fKM88vs=
matrix:
  fast_finish: true
  allow_failures:
  - env: EMBER_TRY_SCENARIO=ember-beta
  - env: EMBER_TRY_SCENARIO=ember-canary
before_install:
- npm config set spin false
- npm install -g coveralls pr-bumper
- pr-bumper check
install:
- npm install
- bower install
before_script:
- "export DISPLAY=:99.0"
- "sh -e /etc/init.d/xvfb start"
- sleep 3 # give xvfb some time to start
script:
- npm run lint
- ember try:one $EMBER_TRY_SCENARIO --- ember test
after_success:
- .travis/publish-coverage.sh
before_deploy:
- pr-bumper bump
deploy:
  provider: npm
  email: npm.ciena@gmail.com
  skip_cleanup: true
  api_key:
    secure: x8aczaAdvl6hm55XQyago+emi6dpKOTHTrq5DD2O/XLU37WLVrBfSGtNghcdEWIb+qwpPnesVfkuxGj0Juh/VLaWeeTrb8Zq3iidqWZ/jv+ptyKWUKmp++7LJRB3EV6Ww+4VVucp/FEuZXwByoU8jL4/GyGR/XONV4DefPSz6Ox11gIC7MT+bPhpvsZsLWm8W1Ig9vqbcRGAHmrBpXqurqNq642aHiVP4ddcekI/D0Os9xP+yymuvO0KJN+Lu/n/tyvdNTSfmn+x3iJLeJpqC+1cwNYkd6seWQh70cw/m0KPmK46QhCO6NDrxMa/jQE/XdN1LU0AkN0urINsg7gE3DmKR3yWTR+bSbqCDCXUOyTZ1wWW4n9YTCcsf+pddPokjKgMBbPCbOiwn1/2pXYgjnIgTILK/mPKKcxNXXpTuQof/V6nzbcfqVE21sAO7utisCtz1zDemhtLk6mwgtcaKzYEPEi7LGFeCLkx3YdbKPAzcmKux2vYlSPNz6I2SrBpJXImQ/0KoXUY4beVcCGBeDX/2fmJf1kgXhO0YpX3xuP5MqSeCtIYt5BrQuOBXr2RRThID8zq6bsBv3A+dxHvecFvzo9l7KCUPKN7BafavSCNQZ/pe3ErTgoGX4J7ehHaqWuu9C9ENiq0zluTSVFxB5SeEPHJl4hGBrjH7+Xwas8=
  on:
    branch: master
    condition: "$EMBER_TRY_SCENARIO = 'default'"
    node: 'stable'
    tags: false
notifications:
  slack:
    secure: YUeAQQ8hp4IRKK5mlP8N7Iz2QTIkpCrfZHsnUm4+14IL+ZRU19vg30VwnieBieLZfr5lfh2uUclror8w6kmTb0IEDJYmbhRcWklwcyfPbbQPjucnlTlYM5Psr3i+Y6T3X0eqvwEfUKKAIMjqSJN30/75KR7N88bl7fTQFS7ZcrBKKrKYq5lND9l59XCd2oq7gN4bVQCd3vWS7x+Y667MAm2PKnPSZIEPNvrm9KmDQPivxfn3ixe1HlW9EKxmFmYjVEzGpMUb38xirH2VUw/mRVn5g/3GP5PgYw89/BRAz4mNqKa5ACvP/HVcSLwNgAiG1U2iL224MMHC/H8mMwy+3YROk68wxKoJP5EArRDTPdyvyaiZV7hWKAonqB7kaq1Jshk98rTPfhpQin5R0u+NnJ5qQzWQXfbGR7KpWQJZWl6qbwsFHq2ftOsCM88T0NbOOy0Btgs6ZQwINde441cDcdar56CUlbL1dObZD8v+D9oZXTfOrbrwHqT1Bsy3tWywbk2inUnGtbx1qmKPJVWFLKeAdmSXtOIQZZq7WcVatNob0AlJDYlyLgzx42rZKSJJX+tohqQ6obkPuoFn7DFAzUT0dhI17fu/0ZvZIAbhLpllIaeG5gRjPsTNvdOiJTUYg72NwqSKwDpH+Yz/be/b0r6MblA8uAgWCpd4/4igASU=
